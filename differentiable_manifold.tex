\documentclass{report}

\input{preamble}

\tikzcdset{arrow style=tikz,
    squigarrow/.style={
        decoration={
        snake, 
        amplitude=.25mm,
        segment length=2mm
        }, 
        rounded corners=.1pt,
        decorate
        }
    }

\begin{document}

% Your document content here
\chapter{Basic Concepts of Manifolds}
\section{Topological Manifold}
\subsection{Definition of Topological Manifold}
\dfn{Topological Manifold}{
    An $n$-dimensional \emph{topological manifold} is a Hausdorff topological space that is locally homeomorphic to $n$-dimensional Euclidean space.
}
``Locally homeomorphic to $n$-dimensional Euclidean space" means that for any point $p$ in the topological space $M$, there exists a neighborhood $N(p)$ of $p$ such that $N(p)$ is homeomorphic to the Euclidean space $\mathbb{R}^n$.

\subsection{Coordinate Chart}

\dfn{Coordinate Chart}{
    If $U_\alpha$ is an open set in $\mathbb{R}^n$,
    $$
        \mathbf{x}_\alpha:U_\alpha\longrightarrow \mathbf{x}_\alpha (U_\alpha)\subseteq M
    $$
    is a homeomorphism and $\mathbf{x}_\alpha (U_\alpha)$ contains some point $p\in M$, then the pair $(U_\alpha,\mathbf{x}_\alpha)$ is called a \emph{coordinate chart} or \emph{(local) coordinate system} of the topological manifold $M$ at point $p$.
}

Given a coordinate chart, $\mathbf{x}^{-1}_{\alpha}$ is often called the local coordinate mapping at point $p$. The image of point $p$ under $\mathbf{x}^{-1}_{\alpha}$, denoted as $\mathbf{x}^{-1}_\alpha(p)$, is called the local coordinate of point $p$. Coordinate charts can transform the local structure of a topological manifold into the familiar coordinates in $\mathbb{R}^n$, so they are sometimes also called parameterizations.

At any point $p$ in the topological manifold $M$, there exists at least one coordinate chart. In fact, let $\eta$ be a homeomorphism from $N(p)$ to $\mathbb{R}^n$. By definition of a neighborhood, there exists an open set $W\subseteq M$ such that $p\in W\subseteq N(p)$. Therefore, if we restrict $\eta$ to $W$ and let $\mathbf{x}=(\left.\eta\right|_{W})^{-1}$, then
$$
    \mathbf{x}:U\longrightarrow \mathbf{x}(U)
$$
is also a homeomorphism. Hence, $(U,\mathbf{x})$ is a coordinate chart at point $p$.

\subsection{Atlas}
\dfn{Atlas}{
If $\Sigma=\{(U_\alpha,\mathbf{x}_\alpha)\}_{\alpha\in A}$ is a collection of coordinate charts for the topological manifold $M$ and $\{\mathbf{x}_\alpha(U_\alpha)\}_{\alpha\in
    A}$ is a cover of $M$, then $\Sigma$ is called an \emph{atlas} of $M$.
}
A topological manifold $M$ can be regarded as a topological space obtained by gluing together many open subsets $U_\alpha(\alpha\in A)$ of Euclidean spaces.

Given an atlas $\Sigma=\{(U_\alpha,\mathbf{x}_\alpha)\}_{\alpha\in
    A}$ of the topological manifold $M$, some coordinate charts in the atlas may have overlapping regions. In other words, some points in $M$ may be covered by multiple coordinate charts. Suppose $(U_\alpha,\mathbf{x}_\alpha)$ and $(U_\beta,\mathbf{x}_\beta)$ have overlapping regions, i.e.,
\[
    \mathbf{x}_\alpha(U_\alpha)\cap \mathbf{x}_\beta(U_\beta)\ne\varnothing.
\]
Then we can define transition functions
\[
    \mathbf{x}^{-1}_\beta\circ \mathbf{x}_{\alpha}:
    \mathbf{x}^{-1}_\alpha(\mathbf{x}_\alpha(U_\alpha)\cap
    \mathbf{x}_\beta(U_\beta)) \longrightarrow
    \mathbf{x}^{-1}_\beta(\mathbf{x}_\alpha(U_\alpha)\cap
    \mathbf{x}_\beta(U_\beta))
\]
and
\[
    \mathbf{x}^{-1}_{\alpha}\circ
    \mathbf{x}_\beta:  \mathbf{x}^{-1}_\beta(\mathbf{x}_\alpha(U_\alpha)\cap
    \mathbf{x}_\beta(U_\beta))\longrightarrow
    \mathbf{x}^{-1}_\alpha(\mathbf{x}_\alpha(U_\alpha)\cap
    \mathbf{x}_\beta(U_\beta)).
\]
Since the composition of two homeomorphisms is still a homeomorphism, the above two transition functions are both homeomorphisms. As mentioned earlier, a point $p$ in $M$ may be covered by multiple coordinate charts, meaning that point $p$ may have multiple local coordinates. With the help of transition functions, we can switch between multiple local coordinates of point $p$.

\section{Differentiable Manifold}
\subsection{Motivation: Defining Differentiable Functions}
A topological manifold is a type of topological space that is locally ``very similar" to Euclidean space. Here, ``very similar" refers to a consistent topological structure. Since topological manifolds have a topology that locally behaves like the Euclidean topology, various techniques developed for the Euclidean topology can be applied to topological manifolds. 

As is well known, Euclidean spaces also have many structures more refined than topology, such as the ability to define differentiable functions and compute derivatives. If a topological manifold locally inherits this more refined structure, then, similarly, we can define differentiable functions and compute derivatives on the topological manifold. We will now provide a formal definition of this more refined structure.

Let $M$ be an $n$-dimensional topological manifold and $\Sigma=\{(U_\alpha,\mathbf{x}_\alpha)\}_{\alpha\in
A}$ be an atlas of $M$. Our goal is to define differentiable functions $f:M\to \mathbb{R}^m$ on a topological manifold $M$ in a reasonable way. A natural idea is to locally pull back the domain from a subset of $M$ to $U_\alpha\subset\mathbb{R}^n$ using the coordinate chart $(U_\alpha,\mathbf{x}_\alpha)$. Specifically, we can attempt to define differentiable functions as follows: function $f:M\to \mathbb{R}^m$ is differentiable at point $p$ if and only if for any coordinate chart $(U_\alpha,\mathbf{x}_\alpha)$ covering point $p$, the composite function
\[
    f\circ \mathbf{x}_\alpha:U_\alpha\longrightarrow \mathbb{R}^m
\]
is differentiable at point $\mathbf{x}^{-1}_\alpha(p)$.

\subsection{Compatible Atlas}
This definition is theoretically valid but can be cumbersome in practice. To prove the differentiability of $f$ at point $p$, we need to verify differentiablity of $f\circ \mathbf{x}_\alpha$ for all coordinate charts $(U_\alpha,\mathbf{x}_\alpha)$ covering point $p$. 

In fact, if we only consider so-called compatible atlases, the situation becomes much simpler. In this case, we only need to verify one arbatrary 
coordinate chart covering point $p$. The following definition makes this idea precise.

\dfn{Compatible Coordinate Charts and Compatible Atlas}{Two coordinate charts $(U_\alpha,\mathbf{x}_\alpha)$, $(U_\beta,\mathbf{x}_\beta)$ are called \emph{compatible} if
\[
    U_\alpha\cap U_\beta\ne\varnothing\implies\mathbf{x}^{-1}_\beta\circ
\mathbf{x}_{\alpha},\;\mathbf{x}^{-1}_{\alpha}\circ \mathbf{x}_\beta
\text{ are differentiable}.
\]
If any two coordinate charts in an atlas are compatible, the atlas is called a \emph{compatible atlas}. 
}

Suppose $(U_\alpha,\mathbf{x}_\alpha)$, $(U_\beta,\mathbf{x}_\beta)$ are two coordinate charts covering point $p$. Notice that
$$
\begin{aligned}
f\circ \mathbf{x}_\beta &= (f\circ \mathbf{x}_\alpha)\circ(\mathbf{x}^{-1}_\alpha\circ \mathbf{x}_{\beta}),\\
f\circ \mathbf{x}_\alpha &= (f\circ \mathbf{x}_\beta)\circ(\mathbf{x}^{-1}_\beta\circ \mathbf{x}_{\alpha}).
\end{aligned}
$$
We see that $f \circ \mathbf{x}_\beta$ is differentiable if and only if $f \circ \mathbf{x}_\alpha$ is differentiable. Therefore, if the given atlas is compatible, our definition of differentiable functions can be written as: a function $f: M \to \mathbb{R}^m$ is differentiable at point $p$ if and only if there exists a coordinate chart $(U_\alpha, \mathbf{x}_\alpha)$ covering point $p$ such that the composite function
$$
f\circ \mathbf{x}_\alpha:U_\alpha\longrightarrow \mathbb{R}^m
$$
is differentiable at point $\mathbf{x}^{-1}_\alpha(p)$.

\subsection{Differential Structure and Differentiable Manifold}
Compatible atlases can be maximized.
\dfn{Maximal Atlas of a Compatible Atlas}{
    Let $\Sigma=\{(U_\alpha,\mathbf{x}_\alpha)\}_{\alpha\in A}$ be a compatible atlas of the topological manifold $(M, \tau)$, then
\[
\Sigma_{\max}=\left\{(U_\alpha,\mathbf{x}_\alpha)\mid(U_\alpha,\mathbf{x}_\alpha) \text{ is compatible with every coordinate chart in $\Sigma$}\right\}
\]
is called the maximal atlas of $\Sigma$.
} 
A maximal compatible atlas $\Sigma_{\max}$ on the topological manifold $(M, \tau)$ is called a \emph{differential structure} of $(M, \tau)$. A topological manifold equipped with a differential structure is called a differentiable manifold, denoted as the triplet $(M, \tau, \Sigma_{\max})$. Unless otherwise specified, when we talk about coordinate charts of differentiable manifolds, we always assume that the coordinate charts are taken from the differentiable manifold's own atlas.

By replacing ``differentiable" with ``$C^r$-differentiable" or ``smooth", we can similarly define $C^r$-compatible atlases and smooth compatible atlases, $C^r$-differential structures and smooth structures, and $C^r$-differentiable manifolds and smooth manifolds. In the following, we will mainly discuss smooth manifolds, but the related concepts can be extended to differential manifolds and $C^r$-differential manifolds in a similar way.


\chapter{Smooth Mapping}
\section{Definition}
One of the motivations for defining a smooth (differentiable) manifold is to define smooth (differentiable) functions. Let $(M,\tau,\Sigma)$ be a smooth manifold, and a function $f:M\to \mathbb{R}^n$ is smooth at point $p$, if and only if there exists a coordinate chart $(U_\alpha,\mathbf{x}_\alpha)\in\Sigma$ covering point $p$, such that the composite function
$$
f\circ \mathbf{x}_\alpha:U_\alpha\longrightarrow \mathbb{R}^m
$$
is smooth at point $\mathbf{x}^{-1}_\alpha(p)$.

Furthermore, we can also define smooth mappings between smooth manifolds $(M_1,\tau_1,\Sigma_1), (M_2,\tau_2,\Sigma_2)$. To define the smoothness of mapping $f:M_1\to M_2$ at point $p$, in addition to pulling back the domain from a subset of $M_1$ to $U_\alpha\subset\mathbb{R}^n$, we also need to push forward the codomain from $M_2$ to $V_\beta\subset\mathbb{R}^m$.
\dfn{Smooth Mapping}{
    The mapping $f:M_1\to M_2$ is a smooth mapping at point $p$, if there exists a coordinate chart $(U_\alpha,\mathbf{x}_\alpha)\in\Sigma_1$ 
    covering point $p$ and a coordinate chart $(V_\beta,\mathbf{y}_\beta)\in\Sigma_2$ covering point $f(p)$, such that the composite function
    \[
    \mathbf{y}^{-1}_\beta \circ f\circ \mathbf{x}_\alpha:U_\alpha\longrightarrow V_\beta
    \]
    is smooth at point $\mathbf{x}^{-1}_\alpha(p)$.
}
Notice that
\[
    f = \mathbf{y}_\beta\circ(\mathbf{y}^{-1}_\beta \circ f\circ \mathbf{x}_\alpha)\circ\mathbf{x}^{\hspace{2pt}-1}_\alpha
\]
we see that $f$ being smooth at point $p$ implies that $f$ is continuous at point $p$.
Moreover, note that 
\[
    \tilde{\mathbf{y}}^{-1}_\beta \circ f\circ \tilde{\mathbf{x}}_\alpha=(\tilde{\mathbf{y}}^{-1}_\beta\circ\mathbf{y}_\beta) \circ(\mathbf{y}^{-1}_\beta \circ f\circ \mathbf{x}_\alpha)\circ(\mathbf{x}^{-1}_\alpha\circ \tilde{\mathbf{x}}_\alpha),
\]
where $\tilde{\mathbf{x}}_\alpha$ and $\tilde{\mathbf{y}}_\beta$ are two other coordinate charts covering point $p$ and $f(p)$ respectively. It is clear that the smoothness of $f:M_1\to M_2$ at point $p$ does not depend on the choice of coordinate charts.

If the mapping $f:M_1\to M_2$ is smooth in an open set $U\subset M_1$, then we say that $f$ is smooth on $U$. If $f$ is smooth at every point in $M_1$, then we say that $f$ is a smooth mapping.

Now we have defined smooth mappings between smooth manifolds, we have yet to explain how to differentiate such smooth mappings - which is one of our motivations for defining smooth (differentiable) manifolds. If we follow the idea of defining smooth mappings, using coordinate charts to convert smooth mappings into smooth functions from $U_\alpha\in\mathbb{R}^n$ to $\mathbb{R}^m$, we will find that different coordinate charts yield different smooth functions and, naturally, different differentials. A simplest example is a smooth real-valued function $f:\mathbb{R}\to\mathbb{R}$. When selecting different coordinate charts $(U_\alpha,x_\alpha),(V_\beta,y_\beta)$ that contain a point $p$, the differentials as linear transformations between $\mathbb{R}$
$$
d(y^{-1}_\beta \circ f\circ x_\alpha)|_p:\mathbb{R}\longrightarrow\mathbb{R}
$$
may differ in general. However, we know these differentials cannot be entirely unrelated, as any differences between them should only arise from the differential of the transition function. A similar situation also occurs in linear algebra. With different bases chosen, a linear transformation can induce different transformations from the coordinate space $\mathbb{R}^n$ to the coordinate space $\mathbb{R}^m$. The only discrepancy between these transformations arises from the change of basis. Therefore, we can imagine that the true ``differential" of a smooth mapping might also be a linear mapping between general linear spaces. Only by choosing specific coordinate charts do we obtain the linear mapping between Euclidean spaces $\mathbb{R}^n$ and $\mathbb{R}^m$. In fact, the ``general linear spaces" here are the tangent spaces we are about to define.

\section{Tangent Vector and Tangent Space}
\subsection{First Definition: Equivalence Class of Curves}
Consider an intuitive example, a smooth surface in $\mathbb{R}^3$ of dimension $2$. At any point $p$ on the surface, we can construct a tangent plane, and the vector with its starting point at $p$ and its endpoint in the tangent plane is called a tangent vector. Therefore, the tangent plane of the surface at point $p$ can be regarded as a linear space $\mathbb{R}^2$ composed of tangent vectors.

For any tangent vector, it can be viewed as the tangent vector of a smooth curve $\gamma$ passing through point $p$ on the surface at $p$. If the parameter equation of curve $\gamma$ is $\gamma(t)=(x(t),y(t),z(t))$ and satisfies $\gamma(t_0)=p$, then its derivative at point $p$
\[
    \gamma'(t_0)=\left(\left.\frac{dx}{dt}\right|_{t_0},\left.\frac{dy}{dt}\right|_{t_0}, \left.\frac{dz}{dt}\right|_{t_0}\right)
\]
is a tangent vector at $p$. Suppose there is another curve $\theta$ passing through point $p$ on the surface. If $\theta$ and $\gamma$ have the same derivative at point $p$, i.e., $\theta'(t_0)=\gamma'(t_0)$, then these two curves actually correspond to the same tangent vector. Therefore, a tangent vector can also be viewed as an equivalence class of curves, and all curves in the class have the same derivative at point $p$. If we can extend the concepts of curves and curve derivatives to general smooth manifolds, we can define tangent vectors and tangent spaces for smooth manifolds in the same way.

Given an $n$-dimensional smooth manifold $(M,\tau,\Sigma)$ and a point $p$ on it, if a smooth mapping $\gamma:(-\epsilon,\epsilon)\to M$ satisfies $\gamma(0)=p$, then $\gamma$ is called a smooth curve on $M$ passing through point $p$. If we want to ``differentiate" the curve, we must first parameterize it, i.e., select a coordinate chart $(U,\mathbf{x})\in\Sigma$ at point $p$ and differentiate the composite function
\[
    \mathbf{x}^{-1} \circ \gamma:(-\epsilon,\epsilon)\to \mathbb{R}^n.
\]
The result of differentiation is $\left.\frac{d(\mathbf{x} \circ \gamma)}{dt}\right|_0$. 
\prop{}{
    If curves $\theta$ and $\gamma$ have the same derivative at point $p$ in a certain coordinate chart $(U_1,\mathbf{x}_1)$, namely
    \[
        \left.\frac{d(\mathbf{x}_1^{-1} \circ \theta)}{dt}\right|_0=\left.\frac{d(\mathbf{x}_1^{-1} \circ \gamma)}{dt}\right|_0,
    \]
    then in any coordinate chart $(U_2,\mathbf{x}_2)$ at point $p$, the curves $\theta$ and $\gamma$ also have the same derivative. 
}
\pf{
    According to the chain rule, we have
    \[
        \left.\frac{d(\mathbf{x}_2^{-1} \circ \theta)}{dt}\right|_0=\left.\frac{d((\mathbf{x}_2 \circ \mathbf{x}_1)\circ(\mathbf{x}_1^{-1} \circ \theta))}{dt}\right|_0=\left.\frac{d(\mathbf{x}_2^{-1} \circ \mathbf{x}_1)}{dx}\right|_p\left.\frac{d(\mathbf{x}_1^{-1} \circ \theta)}{dt}\right|_0.
    \]
    Similarly, we have
    \[
        \left.\frac{d(\mathbf{x}_2^{-1} \circ \gamma)}{dt}\right|_0=\left.\frac{d(\mathbf{x}_2^{-1} \circ \mathbf{x}_1)}{dx}\right|_p\left.\frac{d(\mathbf{x}_1^{-1} \circ \gamma)}{dt}\right|_0.
    \]
    Thus we show that
    \[
        \left.\frac{d(\mathbf{x}_1^{-1} \circ \theta)}{dt}\right|_0=\left.\frac{d(\mathbf{x}_1^{-1} \circ \gamma)}{dt}\right|_0\implies \left.\frac{d(\mathbf{x}_2^{-1} \circ \theta)}{dt}\right|_0=\left.\frac{d(\mathbf{x}_2^{-1} \circ \gamma)}{dt}\right|_0.
    \]
}
We can define that curves $\theta$ and $\gamma$ are equivalent at point $p$ if and only if there exists a coordinate chart $(U,\mathbf{x})$ at point $p$ such that
\[
    \left.\frac{d(\mathbf{x}^{-1} \circ \theta)}{dt}\right|_0=\left.\frac{d(\mathbf{x}^{-1} \circ \gamma)}{dt}\right|_0.
\]
We denote the equivalence class of curve $\gamma$ as $[\gamma]_*$. The set of all smooth curves passing through point $p$ on $M$ under this equivalence relation is the quotient set of the tangent space of $M$ at point $p$, denoted as

\[
    T_p^{1\mathrm{st}}M = \{[\gamma]_*: \gamma \text{ is a smooth curve on } M \text{ passing through } p\}.
\]

\subsection{Second Definition: Functional induces by Curves}
\subsubsection{Motivation}
By regarding tangent vectors as equivalence classes of curves, we have successfully extended the notion of tangent vectors of smooth surfaces in $\mathbb{R}^n$ to general smooth manifolds. Although the definition of tangent vectors via curves is intuitive, demonstrating that the set of all tangent vectors forms a linear space requires defining appropriate addition and scalar multiplication operations on the equivalence classes of curves. 

We may be tempted to define the sum of equivalence classes of curves as the equivalence class of the sum of curves. However, a simple example illustrates that the set of all smooth curves passing through a point $p$ does not form a linear space under such an addition operation. For instance, consider the curves $\gamma$ and $\theta$ such that $\gamma(0)=\theta(0)=p$. It follows that $(\gamma+\theta)(0)=2p\neq p$, indicating that the sum of two curves passing through $p$ may not pass through $p$.

While it is possible to define a novel addition operation for equivalence classes of curves to make them form a linear space, such an operation may prove to be unnatural and inelegant. This observation also suggests that the perspective of equivalence classes of curves may not be the best way to approach the notion of tangent spaces. Instead, a more promising solution may involve re-examining our definition of tangent vectors.

From the definition of tangent vectors, we see there is a mapping from $T_p^{1\mathrm{st}}M$ to $\mathbb{R}^n$
\[
    \mathrm{Drv}_{\mathbf{x}}:[\gamma]_*\longmapsto\left.\frac{d(\mathbf{x}^{-1} \circ \gamma)}{dt}\right|_0.
\]
You can further prove that $\mathrm{Drv}_{\mathbf{x}}$ is actually a bijection. This may suggest defining tangent space as
\[
    \mathrm{Drv}_{\mathbf{x}}\left(T_p^{1\mathrm{st}}M\right)=\left\{\left.\frac{d(\mathbf{x}^{-1} \circ \gamma)}{dt}\right|_0: [\gamma]_*\in T_p^{1\mathrm{st}}M \right\}
\]
which is naturally equipped with a linear space structure. However, this definition is not satisfactory because it is not coordinate-independent. We have already seen earlier that the value of $\left.\frac{d(\mathbf{x}^{-1} \circ \gamma)}{dt}\right|_0$ depends on the choice of coordinate chart $(U,\mathbf{x})$. As a consequence,  there is no canonical way to assign an $n$-dimensional vector to each equivalence class of curves. 

In order to give a coordinate-independent definition of tangent vectors, we consider a mapping like
\[
    \mathrm{Drv}:[\gamma]_*\longmapsto\left.\frac{d(\cdot \circ \gamma)}{dt}\right|_0.
\]
Since $\mathbf{x}^{-1}$ is a smooth mapping from $M$ to $\mathbb{R}^n$, one might consider letting $\left. \frac{d(\cdot \circ \gamma)}{dt} \right|_0$ act on any smooth mapping $\mathbf{f}:M\to\mathbb{R}^n$. However, it is more economical to let it act on smooth functions $\mathbf{f}:M\to\mathbb{R}$, as the action on a vector-valued function $\mathbf{f}:M\to\mathbb{R}^n$ can be decomposed into actions on its component functions $f_i:M\to\mathbb{R}$. To be precise, we define projection functions
\[
\begin{aligned}
    p_i:\mathbb{R}^n&\longrightarrow \mathbb{R}\\
    (x_1,x_2,\cdots,x_n)&\longmapsto x_i.
\end{aligned}
\]
For a vector-valued function $\mathbf{f} : M \to \mathbb{R}^n$, the $i$-th component function of $\mathbf{f}$ is given by $f_i = p_i \circ \mathbf{f}$. Since
\[
    \left(p_i\circ\left.\frac{d(\mathbf{f} \circ \gamma)}{dt}\right)\right|_0=\left.\frac{d(p_i\circ\mathbf{f} \circ \gamma)}{dt}\right|_0=\left.\frac{d(f_i \circ \gamma)}{dt}\right|_0,
\]
we have
\[
    \left.\frac{d(\mathbf{f} \circ \gamma)}{dt}\right|_0=\left(\left.\frac{d(f_1 \circ \gamma)}{dt}\right|_0,\left.\frac{d(f_2 \circ \gamma)}{dt}\right|_0,\cdots,\left.\frac{d(f_n \circ \gamma)}{dt}\right|_0\right).
\]
\subsubsection{Curves induce functionals}
Let $\mathcal{C}^{\infty}_p(M)$ denote the linear space of functions on $M$ that are smooth at the point $p$. Now we can define the functional induced by $\gamma$ as 
\[
\begin{aligned}
    v_\gamma:=\left.\frac{d(\cdot \circ
\gamma)}{dt}\right|_0:\mathcal{C}^{\infty}_p(M)&\longrightarrow \mathbb{R}\\
    f&\longmapsto \left.\frac{d(f \circ \gamma)}{dt}\right|_0.
\end{aligned}
\]
We can check that $v_\gamma$ is a linear functional. For any $f_1,f_2\in\mathcal{C}^{\infty}_p(M)$ and $k\in\mathbb{R}$, we have
$$
\left.\frac{d((f_1+f_2) \circ \gamma)}{dt}\right|_0=\left.\frac{d(f_1\circ \gamma+f_2\circ \gamma )}{dt}\right|_0=\left.\frac{d(f_1\circ \gamma)}{dt}\right|_0+\left.\frac{d(f_2\circ \gamma)}{dt}\right|_0,
$$

$$
\left.\frac{d((kf) \circ \gamma)}{dt}\right|_0=\left.\frac{d(k(f \circ \gamma))}{dt}\right|_0=k\left.\frac{d(f \circ \gamma)}{dt}\right|_0.
$$
Let $\mathcal{C}^{\infty}_p(M)^*$ denote the dual space of $\mathcal{C}^{\infty}_p(M)$, which is the linear space of all linear functionals on $\mathcal{C}^{\infty}_p(M)$. We can now provide a second coordinate-independent definition of tangent space as follows:
$$
T^{2\mathrm{nd}}_pM=\left\{\left.\frac{d(\cdot \circ \gamma)}{dt}\right|_0\in\mathcal{C}^{\infty}_p(M)^*:\gamma\text{ is a smooth curve on $M$ passing through $p$ }\right\}.
$$
\subsubsection{Natural basis}
Next we will introduce natural basis and use it to show that $T^{2\mathrm{nd}}_pM$ is indeed a linear subspace of $\mathcal{C}^{\infty}_p(M)^*$ of dimension $n$.

Given a coordinate chart $(U,\mathbf{x})$ at point $p$, we define the \emph{$i$-th coordinate function} of the coordinate chart $(U,\mathbf{x})$ as
\[
    \begin{aligned}
        \tilde{x}_i=p_i\circ \mathbf{x}^{-1}:M&\longrightarrow \mathbb{R}\\
        p&\longmapsto x_i
    \end{aligned}
\]

\lemm{}{
    If we choose a coordinate chart $(U,\mathbf{x})$ of $M$ at $p$, then for any $v_\gamma\in T^{2\mathrm{nd}}_pM$, $f\in\mathcal{C}^{\infty}_p(M)$,
    \[
        v_\gamma(f)=\sum_{i=1}^n v_\gamma(\tilde{x}_i) \left.\frac{\partial (f\circ \mathbf{x})}{\partial x_i}\right|_{p}.
    \]
}
\pf{
We only need to use the pullback of $f$ and pushforward of $\gamma$ with respect to the coordinate chart $(U,\mathbf{x})$, and then apply the chain rule:
\[
    v_\gamma(f)=\left.\frac{d(f \circ\gamma)}{dt}\right|_0=\left.\frac{d((f \circ \mathbf{x})\circ (\mathbf{x}^{-1}\circ \gamma))}{dt}\right|_0=\sum_{i=1}^n\left.\frac{\partial (f \circ \mathbf{x})}{\partial x_i}\right|_{p}\left.\frac{d(\tilde{x}_i \circ \gamma)}{dt}\right|_0.
\]
}
\noindent Define the \emph{$x_i$-curve} for the coordinate chart $(U,\mathbf{x})$ as
\[
    \begin{aligned}
        \varepsilon_i:(-\epsilon,\epsilon)&\longrightarrow M\\
        t&\longmapsto\mathbf{x}\left(\tilde{x}_1(p),\cdots,\tilde{x}_i(p)+t,\cdots,\tilde{x}_n(p)\right).
    \end{aligned}
\]
$v_{\varepsilon_i}$ is called the \emph{$i$-th coordinate tangent vector} of the coordinate chart $(U,\mathbf{x})$.
We can check that
\[
    v_{\varepsilon_i}\left(\tilde{x}_j\right)=\left.\frac{d(\tilde{x}_j\circ\varepsilon_i)}{dt}\right|_0=\delta_{ij}=\begin{cases}
        0,& i\ne j,\\
        1,& i=j.
        \end{cases}
\]
By lemma 2.2.1, we have
\[
    v_{\varepsilon_i}(f)=\sum_{j=1}^n v_{\varepsilon_i}(\tilde{x}_j) \left.\frac{\partial (f\circ \mathbf{x})}{\partial x_j}\right|_{p}=\left.\frac{\partial (f\circ \mathbf{x})}{\partial x_i}\right|_{p},
\]
which implies 
\[
    v_{\varepsilon_i}=\left.\frac{d(\cdot \circ\varepsilon_i)}{dt}\right|_0=\left.\frac{\partial (\cdot \circ \mathbf{x})}{\partial x_i}\right|_{p}.
\]
\prop{Natural Basis}{
Given a coordinate chart $(U,\mathbf{x})$ of smooth manifold $M$ at point $p$, the coordinate tangent vectors
\[
    (v_{\varepsilon_1},v_{\varepsilon_2},\cdots,v_{\varepsilon_n})=\left(\left.\frac{\partial (\cdot \circ \mathbf{x})}{\partial x_1}\right|_{p},\left.\frac{\partial (\cdot \circ \mathbf{x})}{\partial x_2}\right|_{p},\cdots,\left.\frac{\partial (\cdot \circ \mathbf{x})}{\partial x_n}\right|_{p}\right)
\]
form a basis for the linear space $T_p^{\mathrm{2nd}}M$, called the \emph{natural basis} of the tangent space $T_p^{\mathrm{2nd}}M$ under the coordinate chart $(U,\mathbf{x})$.
}
\pf{
    The linear space spanned by the coordinate tangent vectors is denoted by $\mathop{\mathrm{span}}\limits_{1\le i \le n}(v_{\delta_i})$. Lemma 2.1.1 states that 
    \[
        v_\gamma(f)=\sum_{i=1}^n v_\gamma(\tilde{x}_i) \left.\frac{\partial (f\circ \mathbf{x})}{\partial x_i}\right|_{p}=\sum_{i=1}^n v_\gamma(\tilde{x}_i) v_{\varepsilon_i}(f),
    \]
    or equivalently,
    \[
        v_\gamma = \sum_{i=1}^n v_\gamma(\tilde{x}_i) v_{\varepsilon_i}.
    \]
    That means any vector in $T^{2\mathrm{nd}}_pM$ can be written as a linear combination of coordinate tangent vectors, namely 
    \[
        T^{2\mathrm{nd}}_pM\subseteq
        \mathop{\mathrm{span}}\limits_{1\le i \le
        n}(v_{\varepsilon_i}).
    \]
    Conversely, for any linear combination of coordinate tangent vectors $\sum\limits_{i=1}^n\lambda_iv_{\varepsilon_i}$, we can define a curve
    \[
        \begin{aligned}
            \varepsilon:(-\epsilon,\epsilon)&\longrightarrow M\\
            t&\longmapsto\mathbf{x}(\tilde{x}_1(p)+\lambda_1t,\tilde{x}_2(p)+\lambda_2t,\cdots,\tilde{x}_n(p)+\lambda_nt),
        \end{aligned}
    \]
    such that
    \[
        v_\varepsilon = \sum_{i=1}^n v_\varepsilon(\tilde{x}_i) v_{\varepsilon_i}=\sum_{i=1}^n\left.\frac{d(\tilde{x}_i \circ \varepsilon)}{dt}\right|_0 v_{\varepsilon_i}=\sum_{i=1}^n\left.\frac{d(p_i\circ\mathbf{x}^{-1} \circ \varepsilon)}{dt}\right|_0 v_{\varepsilon_i}=\sum_{i=1}^n\left.\frac{d(\tilde{x}_i(p)+\lambda_it)}{dt}\right|_0 v_{\varepsilon_i}=\sum_{i=1}^n\lambda_iv_{\varepsilon_i}.
    \]
    Thus we have $\mathop{\mathrm{span}}\limits_{1\le i \le n}(v_{\varepsilon_i})\subseteq T^{2\mathrm{nd}}_pM$. Therefore, we show that
    \[
        T^{2\mathrm{nd}}_pM=\mathop{\mathrm{span}}\limits_{1\le i \le n}(v_{\varepsilon_i}),
    \]
    which justifies $T^{2\mathrm{nd}}_pM$ is a linear space.

    Furthermore, we can prove that $v_{\varepsilon_1},v_{\varepsilon_2},\cdots,v_{\varepsilon_n}$ are linearly independent. If
    \[
        \sum_{i=1}^n\lambda_iv_{\varepsilon_i}=0,
    \]
    let the two sides of the above equation act on $\tilde{x}_j$ for $1\le j\le n$. Then we have
    \[
        \sum_{i=1}^n\lambda_iv_{\varepsilon_i}(\tilde{x}_j)=\sum_{i=1}^n\lambda_i\delta_{ij}=\lambda_j=0,
    \]
    for $1\le j\le n$, which proves that they are linearly independent. Therefore, $v_{\varepsilon_1},v_{\varepsilon_2},\cdots,v_{\varepsilon_n}$ form a basis for $T^{2\mathrm{nd}}_pM$. 
}
\cor{}{
    The dimension of the tangent space $T^{2\mathrm{nd}}_pM$ is $n$, which is the same as the dimension of $M$.
}

\subsection{Third Definition: Language of Sheaf Theory}
We can also use the language of sheaf theory to define tangent vectors and tangent spaces. Sheaf theory is a more abstract theory that is not only applicable to differential geometry, but also to more general geometry.

A \emph{presheaf} is essentially a contravariant functor. A set presheaf is a contravariant functor $\mathcal{F}:\mathsf{C}^{\mathrm{op}}\to\mathsf{Set}$ from a category $\mathsf{C}$ to the category of sets $\mathsf{Set}$. A group presheaf is a contravariant functor $\mathcal{F}:\mathsf{C}^{\mathrm{op}}\to\mathsf{Ab}$ from a category $\mathsf{C}$ to the category of abelian groups $\mathsf{Ab}$. Given an object $X$ in $\mathsf{C}$, an element of $\mathcal{F}(X)$ is called a \emph{section} of $\mathcal{F}$ over $X$.

When studying a smooth manifold $M$, we choose $\mathsf{C}$ to be the category whose objects are open sets in $M$, and whose morphisms are inclusions of open sets. We consider a presheaf on an open set $X$ to be the collection of all smooth real-valued functions defined on $X$, denoted $C^\infty(X;M\to\mathbb{R})$, which we can also write as $C^\infty(X)$ for short.

The functor $C^\infty(\cdot)$ can be illustrated as follows:
\begin{equation*}
    \begin{tikzcd}
        X  \arrow[dd, "i"{name=L, left}] &[-25pt] & [+10pt] & [-30pt] C^\infty(X) \arrow[dd, "i^*"{name=R}]\\ [-10pt] 
                                        &  \phantom{.}\arrow[r, "C^\infty", squigarrow]&\phantom{.}  &   \\[-10pt] 
        Y & & & C^\infty(Y)
    \end{tikzcd}
\end{equation*}  
Depending on our needs, $C^\infty(\cdot)$ can be a presheaf of real vector spaces, a presheaf of rings, or a presheaf of commutative real algebras.

Given a point $p$ in $M$, we denote by
\[
    \widetilde{\mathcal{C}}^\infty_p=\{(\varphi,X):p\in X,\varphi\in C^\infty(X)\}
\]
the set of smooth real-valued functions defined on an open set containing $p$. We define $C^\infty_p=\widetilde{\mathcal{C}}_p/\overset{p}\sim$ where $\overset{p}\sim$ is the equivalence relation defined as follows:
\[
    (\varphi_1,X_1)\overset{p}\sim (\varphi_2,X_2)\iff\text{there exists an open set }X_3\subset X_1\cap X_2,\text{such that } \varphi_1|_{X_3}=\varphi_2|_{X_3}.
\]
Or in a language of filtered limit,
\[
    C^\infty_p=\varinjlim_{p\in X}C^\infty(X).
\]
We call $C^\infty_p$ the stalk of smooth functions at the point $p$. It can be easily verified that the smooth function stalk is a commutative real algebra. The equivalence class of a smooth function $\varphi$ is denoted as $[\varphi]_p$ and is called the germ of $\varphi$ at point $p$. Since all smooth functions within a germ have identical local properties at point $p$, it is natural to identify them and not to consider their differences. 

Using the language of function germs, we can rewrite the second definition. The functional $\left.\frac{d}{dt}(\cdot \circ \gamma)\right|_0$ was originally applied to a smooth function $f$ defined on the entire manifold and smooth at point $p$, but the properties of $f$ outside some neighborhood of point $p$ are actually irrelevant, and even whether it is defined or not is not important. Therefore, we can assume that $f$ is defined in some open neighborhood of point $p$, and then let $\left.\frac{d}{dt}(\cdot \circ \gamma)\right|_0$ act directly on the germ of the smooth function $f$ at point $p$, denoted as $[f]_p$, which is defined as
\[
    \begin{aligned}
        \left.\frac{d(\cdot \circ \gamma)}{dt}\right|_0:C^\infty_p&\longrightarrow \mathbb{R}\\
        [f]_p&\longmapsto \left.\frac{d(f \circ \gamma)}{dt}\right|_0
    \end{aligned}
\]
And correspondently, the tangent space $T^{2\mathrm{nd}}_pM$ can be defined as
\[
    T^{2\mathrm{nd}}_pM=\left\{\left.\frac{d(\cdot \circ \gamma)}{dt}\right|_0\in \left(C^{\infty}_p\right)^*:\gamma\text{ is a smooth curve on $M$ passing through $p$ }\right\}.
\]
Furthermore, we can provide a concise definition of a tangent vector without the use of curves, through an axiomatic approach. A tangent vector at a point $p$ of a manifold $M$ is a linear functional defined on $C^\infty_p$ that satisfies the Leibniz rule. In a formal manner, this can be expressed as follows:
\dfn{Tangent Space}{
    Given a smooth manifold $M$ and a point $p$ on it. A function $\nu: C^\infty_p \to \mathbb{R}$ is said to be a \emph{tangent vector} of manifold $M$ at point $p$ if it satisfies the following conditions for any $\lambda_1, \lambda_2 \in \mathbb{R}$ and any $[f]_p, [g]_p \in C^\infty_p$:
    \begin{enumerate}
        \item Linearity: $\nu(\lambda_1[f]_p + \lambda_2[g]_p) = \lambda_1\nu([f]_p) + \lambda_2\nu([g]_p)$,
        \item Leibniz rule: $\nu([f]_p[g]_p) = [f]_p\nu([g]_p) + \nu([f]_p)[g]_p$.
    \end{enumerate}
    The set of tangent vectors of a manifold $M$ at point $p$ forms a linear space, denoted by $T_p^{\mathrm{3th}}M$, and is called the \emph{tangent space} of $M$ at point $p$.
}
Due to the equivalence of the three distinct definitions of tangent space, we will adopt the notation $T_pM$ to refer to the tangent space of a manifold $M$ at a given point $p$, without explicitly specifying the definition being used.

% \begin{Theorem}{Title}{label}
%     This is the statement of the theorem.
% \end{Theorem}

% \begin{corollary}{Title}{label}
%     This is the statement of the corollary.
% \end{corollary}

% \begin{claim}{Title}{label}
%     This is the statement of the claim.
% \end{claim}

% \begin{Example}{Title}{label}
%     This is an example.
% \end{Example}

% \begin{Definition}{Title}{label}
%     This is a definition.
% \end{Definition}
\end{document}